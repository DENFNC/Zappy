syntax = "proto3";

package user.v1;
option go_package = "github.com/DENFNC/Zappy/user_service/proto/gen/v1;v1";

import "google/protobuf/timestamp.proto";
import "validate/validate.proto";


message FullName {
  string first_name = 1 [(validate.rules).string = {min_len: 1, max_len: 50}];
  string last_name = 2 [(validate.rules).string = {min_len: 1, max_len: 50}];
}

message Profile {
  uint64 profile_id = 1;
  uint64 auth_user_id = 2 [(validate.rules).uint64 = {gt: 0}];
  FullName name = 3;
  string phone = 4 [(validate.rules).string = {max_len: 20}];
  google.protobuf.Timestamp created_at = 5;
  google.protobuf.Timestamp updated_at = 6;
  bool is_active = 7;
}

message ProfileIDResponse {
  uint64 profile_id = 1;
  string message = 2;
}

message CreateProfileRequest {
  Profile profile = 1;
}


message GetProfileRequest {
  uint64 profile_id = 1 [(validate.rules).uint64 = {gt: 0}];
}


message UpdateProfileRequest {
  Profile profile = 1;
}


message DeleteProfileRequest {
  uint64 profile_id = 1 [(validate.rules).uint64 = {gt: 0}];
}


message ListProfilesRequest {
  int32 limit = 1 [(validate.rules).int32 = {gt: 0}];
  int32 offset = 2 [(validate.rules).int32 = {gte: 0}];
}


message ListProfilesResponse {
  repeated Profile profiles = 1;
}

service UserProfileService {
  rpc CreateProfile(CreateProfileRequest) returns (ProfileIDResponse);
  rpc GetProfile(GetProfileRequest) returns (Profile);
  rpc UpdateProfile(UpdateProfileRequest) returns (ProfileIDResponse);
  rpc DeleteProfile(DeleteProfileRequest) returns (ProfileIDResponse);
  rpc ListProfiles(ListProfilesRequest) returns (ListProfilesResponse);
}